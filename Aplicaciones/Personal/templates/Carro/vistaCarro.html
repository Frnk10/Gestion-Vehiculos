<div class="container">
    <h1 class="mt-4">Lista de Automóviles</h1>
    
    <!-- Formulario para agregar automóvil -->
    <div class="row mb-4">
        <div class="col-12">
            <h5>Agregar Nuevo Automóvil</h5>
            <form id="formAgregarCarro">
                <div class="mb-3">
                    <label for="color_car" class="form-label">Color</label>
                    <input type="text" class="form-control" id="color_car" name="color_car" required>
                </div>
                <div class="mb-3">
                    <label for="precio_car" class="form-label">Precio</label>
                    <input type="number" class="form-control" id="precio_car" name="precio_car" step="0.01" required>
                </div>
                <div class="mb-3">
                    <label for="placa_com" class="form-label">Placa</label>
                    <input type="text" class="form-control" id="placa_car" name="placa_car" required>
                </div>
                <div class="mb-3">
                    <label for="fkid_mod" class="form-label">Modelo</label>
                    <select class="form-select" id="fkid_mod" name="fkid_mod" required>
                        <option value="" disabled >Seleccione un modelo</option>
                        {% for modelo in modelos %}
                            <option value="{{ modelo.id }}">{{ modelo.nombre_mod }}</option>
                        {% endfor %}
                    </select>
                </div>
                <button type="button" class="btn btn-primary" onclick="agregarCarro();">Agregar</button>
            </form>
        </div>
    </div>
    
    <!-- Tabla de automóviles -->
    <div class="table-responsive">
        <table class="table" id="tbl-auto">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>COLOR</th>
                    <th>PRECIO</th>
                    <th>PLACA</th>
                    <th>ID MODELO</th>
                    <th>ACCIONES</th>
                </tr>
            </thead>
            <tbody>
            {% for auto in autos %}
                <tr>
                    <td style="width: 200px;">
                        <p class="text-small small">{{ auto.id }}</p>
                    </td>
                    <td style="width: 200px;">
                        <p class="text-small small">{{ auto.color_car }}</p>
                    </td>
                    <td style="width: 100px;">
                        <p class="text-small small">{{ auto.precio_car }}</p>
                    </td>
                    <td style="width: 100px;">
                        <p class="text-small small">{{ auto.placa_car }}</p>
                    </td>
                    <td style="width: 100px;">
                        <p class="text-small small">{{ auto.fkid_mod }}</p>
                    </td>
                    <td style="width: 50px;">
                        <div class="row">
                            <div class="col-md-6">
                                <button type="button" class="btn-sm rounded" data-bs-toggle="modal" data-bs-target="#modalEditarCarro" onclick="abrirmodalVerCarro({{auto.id}});"><i class="fas fa-pen"></i></button>
                            </div>
                            <div class="col-md-6">
                                <button type="button" class="btn-sm rounded" onclick="eliminarCarro({{auto.id}})"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                    </td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="6">No hay automóviles registrados.</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>


<!-- Modal de Edición de Vehículo -->
<div class="modal fade" id="modalEditarCarro" tabindex="-1" aria-labelledby="modalEditarCarroLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalEditarCarroLabel">Editar Vehículo</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Formulario de Edición -->
                <form id="formEditarCarro">
                    <input type="text" id="carro_id_editar" value="">
                    <div class="mb-3">
                        <label for="color_car" class="form-label">Color del carro:</label>
                        <input type="text" id="color_car_editar" name="color_car_editar" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="precio_car" class="form-label">Precio del carro:</label>
                        <input type="text" id="precio_car_editar" name="precio_car_editar" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="placa_car" class="form-label">Placa del carro:</label>
                        <input type="text" id="placa_car_editar" name="placa_car_editar" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label for="fkid_mod" class="form-label">Modelo del carro:</label>
                        <select id="fkid_mod_editar" name="fkid_mod_editar" class="form-select">
                            <option value="">Cargando modelos...</option> <!-- Esto se reemplazará dinámicamente -->
                        </select>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="editarCarro();">Actualizar Vehículo</button>
                </form>
            </div>
        </div>
    </div>
</div>