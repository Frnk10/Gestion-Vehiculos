<div class="container mt-5">
    <h2>Agregar Propietario</h2>

    <!-- Formulario para agregar un propietario -->
    <div class="container mb-4">
        <form id="propietario-form">
            <div class="row align-items-center justify-content-center">
                <div class="col-md-3">
                    <label for="nombre_pro" class="form-label">Nombre</label>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control" id="nombre_pro" name="nombre_pro" required>
                </div>
            </div>
            <div class="row align-items-center justify-content-center mt-3">
                <div class="col-md-3">
                    <label for="apellido_pro" class="form-label">Apellido</label>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control" id="apellido_pro" name="apellido_pro" required>
                </div>
            </div>
            <div class="row align-items-center justify-content-center mt-3">
                <div class="col-md-3">
                    <label for="email_pro" class="form-label">Email</label>
                </div>
                <div class="col-md-4">
                    <input type="email" class="form-control" id="email_pro" name="email_pro" required>
                </div>
            </div>
            <div class="row align-items-center justify-content-center mt-3">
                <div class="col-md-3">
                    <label for="telefono_pro" class="form-label">Teléfono</label>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control" id="telefono_pro" name="telefono_pro" required>
                </div>
            </div>
            <div class="row align-items-center justify-content-center mt-3">
                <div class="col-md-3">
                    <label for="fkid_ciu" class="form-label">Ciudad</label>
                </div>
                <div class="col-md-4">
                    <select class="form-select" id="fkid_ciu" name="fkid_ciu" required>
                        <option value="" selected disabled>Seleccione una ciudad</option>
                        {% for ciudad in ciudades %}
                            <option value="{{ ciudad.id }}">{{ ciudad.nombre_ciu }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="row align-items-center justify-content-center mt-3">
                <div class="col-md-2">
                    <button type="button" class="btn btn-success w-100" onclick="agregarPropietario()">Agregar Propietario</button>
                </div>
            </div>
        </form>
    </div>

    <hr>

    <!-- Tabla de propietarios -->
    <h3 class="mt-4 text-center">Propietarios Existentes</h3>
    <div class="table-responsive d-flex justify-content-center">
        <table id="tbl-propietario" class="table table-striped table-bordered" style="width: 80%;">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Email</th>
                    <th>Teléfono</th>
                    <th>Ciudad</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for propietario in propietarios %}
                <tr>
                    <td>{{ propietario.id }}</td>
                    <td>{{ propietario.nombre_pro }}</td>
                    <td>{{ propietario.apellido_pro }}</td>
                    <td>{{ propietario.email_pro }}</td>
                    <td>{{ propietario.telefono_pro }}</td>
                    <td>{{ propietario.fkid_ciu.nombre_ciu }}</td>
                    <td class="text-center">
                        <button onclick="cargarDatosEditar(propietarioId)" data-bs-toggle="modal" data-bs-target="#editModal" class="btn btn-primary btn-sm mx-1"><i class="fas fa-pen"></i></button>
                        <button onclick="eliminarPropietario({{ propietario.id }})" class="btn btn-danger btn-sm mx-1"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="7" class="text-center">No hay propietarios</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>


<!-- Modal de edición -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">Editar Propietario</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editar-form">
                    <div class="mb-3">
                        <label for="nombre_pro" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="nombre_pro" name="nombre_pro">
                    </div>
                    <div class="mb-3">
                        <label for="apellido_pro" class="form-label">Apellido</label>
                        <input type="text" class="form-control" id="apellido_pro" name="apellido_pro">
                    </div>
                    <div class="mb-3">
                        <label for="email_pro" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email_pro" name="email_pro">
                    </div>
                    <div class="mb-3">
                        <label for="telefono_pro" class="form-label">Teléfono</label>
                        <input type="text" class="form-control" id="telefono_pro" name="telefono_pro">
                    </div>
                    <div class="mb-3">
                        <label for="fkid_ciu" class="form-label">Ciudad</label>
                        <select class="form-select" id="fkid_ciu" name="fkid_ciu" required>
                            <option value="" disabled>Seleccione una ciudad</option>
                            {% for ciudad in ciudades %}
                                <option value="{{ ciudad.id }}">{{ ciudad.nombre_ciu }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-success">Guardar cambios</button>
                </form>
            </div>
        </div>
    </div>
</div>